(()=>{var e={595:e=>{e.exports='<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"/> <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1"/> <meta http-equiv="X-UA-Compatible" content="ie=edge"/> <title>Document</title> <script src="https://api-maps.yandex.ru/2.1/?apikey=c57f9ad4-b24f-4dbc-840c-94772b04b6bd&lang=ru_RU"><\/script> </head> <body> <div class="container"> <div class="weather"> <h1>weather forecast</h1> <ul class="weather__list"></ul> <input type="text" placeholder="Please enter the name of the city"/> <button>Submit</button> <ul class="weather__name"></ul> </div> <div id="map"></div> </div> </body> </html> '}},t={};function a(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,a),o.exports}(()=>{"use strict";a(595);const e=async(e="Moscow")=>{try{const t=new URL("https://api.openweathermap.org/data/2.5/weather");t.searchParams.set("q",e),t.searchParams.set("appid","1dc0ee761828522de14faa39722cb3b0");const a=await fetch(t);return await a.json()}catch(e){console.error(e)}},t=document.getElementById("map"),n=(e,a)=>{ymaps.ready((()=>{t.innerHTML=" ";const n=new ymaps.Map("map",{center:[e,a],zoom:9},{searchControlProvider:"yandex#search"}),r=new ymaps.Placemark(n.getCenter(),{hintContent:"Собственный значок метки",balloonContent:"Сenter city"},{iconLayout:"default#image",iconImageHref:"/img/flags.svg",iconImageSize:[36,36],iconImageOffset:[-5,-38]});n.geoObjects.add(r),n.behaviors.disable("scrollZoom")}))},r=(e=JSON.parse(localStorage.getItem("weather")),t=document.querySelector(".weather__name"),a=document.querySelector(".weather__list"),r=n)=>{const o=[...t.querySelectorAll("li")],c=[...a.querySelectorAll("li")];o.forEach((t=>{t.addEventListener("click",(t=>{c.forEach((a=>{if(a.children[0].textContent===t.target.textContent){a.classList.remove("hidden");const n=e.find((e=>e.name===t.target.textContent));r(n.coord.lat,n.coord.lon)}else a.classList.add("hidden")}))}))}))},o=(e=JSON.parse(localStorage.getItem("weather")),t=document.querySelector(".weather__list"),a=document.querySelector(".weather__name"),n=r)=>{e&&(t.innerHTML="",a.innerHTML="",e.forEach((r=>{const c=document.createElement("li"),i=document.createElement("li");if(c.insertAdjacentHTML("afterbegin",`\n               <h3>${r.name}</h3>\n               <img src="http://openweathermap.org/img/wn/${r.weather[0].icon}@2x.png" alt="icon">\n               <strong>Temperature: ${(r.main.temp-273.15).toFixed(2)}</strong>\n               <strong>Pressure:${r.main.pressure}</strong>\n               <strong>Humidity:${r.main.humidity}</strong>\n            `),i.textContent=r.name,t.children.length<10)t.insertAdjacentElement("afterbegin",c),a.insertAdjacentElement("afterbegin",i);else{const a=[...t.querySelectorAll("li")],n=e.findIndex((e=>e.name===a[1].children[0].textContent));e.splice(n,1),localStorage.setItem("weather",JSON.stringify(e)),o()}n()})))},c=o,i=async(t=[],a=e,r=c,o=n)=>{try{const e=await fetch("https://get.geojs.io/v1/ip/geo.json"),n=await e.json(),c=await a(n.city);t.push(c),localStorage.setItem("weather",JSON.stringify(t)),o(c.coord.lat,c.coord.lon),r()}catch(e){console.error(e)}},s=async(t,a=JSON.parse(localStorage.getItem("weather")),r=document.querySelector("input").value,o=e,i=c,s=n)=>{if(!r)return!1;if(a.some((e=>e.name.toLowerCase().trim()===r.trim().toLowerCase())))return!1;const l=await o(r);return l&&a.push(l),localStorage.setItem("weather",JSON.stringify(a)),s(l.coord.lat,l.coord.lon),i(),a},l=document.querySelector("input"),m=document.querySelector("button");localStorage.getItem("weather")||i(),setTimeout(c,500),m.addEventListener("click",(()=>{s(),l.value=""})),document.body.addEventListener("keydown",(async e=>{"Enter"===e.code&&(s(),l.value="")}))})()})();